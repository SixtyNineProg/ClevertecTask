# ClevertecTestTask
Приложение Clever-Bank

## Description
Основные сущности:
- Банк
- Счёт
- Пользователь
- Транзакция

Реализованы операции:
1. Пополнения и снятия средств со счета.
2. Реализовна возможность перевода средств другому клиенту Clever-Bank и
   клиенту другого банка. При переводе средств в другой банк использована одну
   транзакция и обеспечена безопасность.
3. Регулярно, по расписанию (раз в полминуты), проверяяется, нужно ли начислять
   проценты (1% - значение подставляется из конфигурационного файла) на остаток
   счета в конце месяца.
   Проверка и начисление процентов реализованы асинхронно
4. Значения хранить в конфигурационном файле - [Configuration](src/main/resources/application.yml)
5. После каждой операции формируется чек.
   Чеки сохраняются в папку check, в корне проекта.

## Business-process
Транзакция в магазине: разбор по кусочкам
Прокатывая банковскую карту через терминал, кассир вряд ли понимает, какие процессы при этом происходят. А вот клиенту знание процедуры не помешает (все-таки речь идет о его деньгах и их безопасности).

Что же представляет собой типичная транзакция в магазине? Это несколько связанных друг с другом этапов.

Прежде всего, нужно понимать, что имеются два основных участника: банк-эмитент (ему принадлежит пластиковая карта) и банк-эквайер (обслуживает торговую точку, предоставляя ей POS-терминал). В чем вообще суть операции? В том, что банк-эквайер хочет получить от банка-эмитента разрешение на проведение транзакции. Прокатывая платежное средство через терминал, кассир отправляет в виде потока зашифрованной информации запрос, содержащий необходимые для осуществления транзакции данные. Это номер карты, срок ее действия, ФИО владельца и т.д. В общем, все, что содержат магнитная полоса или чип.
Посланный запрос летит… нет, не в банк. А в специальную организацию, называемую процессинговым центром. Хотя стоит сделать поправку. У некоторых банков (как правило, самых крупных) имеется собственный процессинговый центр. Другие же учреждения вынуждены заключать договор либо с отдельной организацией, либо с другим банком. Процесс, в котором участвует процессинговый центр, называется «запрос на авторизацию». Авторизация (от англ. «authorization») – это разрешение на совершение транзакции. Функция процессингового центра заключается в обработке информации и пересылке ее далее в банк-эмитент.
Проверив сведения и сопоставив их со своими данными, банк-эмитент отправляет процессинговому центру разрешение на совершение транзакции, которое заключается в присвоении операции кода авторизации.
Окончательный этап прост – получив разрешение, банк-эквайер осуществляет транзакцию, результатом которой является чек из POS-терминала и пересылка денег со счета клиента на счет магазина.
Подробнее: https://credit-card.ru/articles/other/transaction.php


### Build tool
This project uses such build tool as gradle.<br/>
Use "./gradle build" to build project.

### CSV Files Path
src\main\resources\csv\

### Manual
To start the project you need:

- Have postgresql, pgAdmin
- Create empty database in pgAdmin
- in application.yml set the necessary data to connect to the database:
  url, username, password.
- data in the database is filled in automatically when starting the project from csv files

## REST-services:
### GET http://localhost:8081/bank/?id={id}
##### getting bank on id
        where:
        {id} - bank id
### PUT http://localhost:8081/bank/
##### update bank
         Example of request body:
         {
            "id": 5,
            "name": "Alfa"
         }
### POST http://localhost:8081/bank/
##### create bank
         Example of request body:
         {
            "name": "Alfa"
         }
### DELETE http://localhost:8081/bank/?id={id}
##### delete bank
         where:
         {id} - bank id
